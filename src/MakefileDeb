##propagation makefile

.SUFFIXES: .cc .class .java .cxx .C .cpp .o .c .l .y .f .f95
 
 
VPATH =  
 
YACC = bison
LEX = flex
JAVA = gcj
CC = gcc
CPP = g++
FORT = g77
YACC_FLAGS =
LEX_FLAGS =
JAVA_FLAGS =
CC_FLAGS =
CPP_FLAGS =   -ggdb -O0 -Wall
YACC_INCLUDES =
LEX_INCLUDES =
JAVA_INCLUDES =
CC_INCLUDES =
CPP_INCLUDES = -I./3rd-party/include
YACC_DEFINES =
LEX_DEFINES =
JAVA_DEFINES = 
CC_DEFINES =
CPP_DEFINES = -D_DEBUG -DUSE_GSL
propagation.sp_LIBS = -lc -lxerces-c -lgsl -lgslcblas -lgfortran
Xmax_LIBS = -lc -lgsl -lgslcblas
LINKER = g++
LINKER_FLAGS = -L./3rd-party/lib -L/lib
LINKER_ENTRY =

propagation.sp_OBJECTS = BLLac.o pp/pp.o pp/frag.o Galaxy.o Parameters.o Source.o RadioBackground.o GZK2.o Franceschini08EBL.o CustomCouplings.o Escape.o Inoue12IROSpectrum.o BlackHoleInjSpectra.o GammaSplitting.o Sarkar1005Background.o Kneiske0309IROSpectrum.o AA.o Weak.o TPP.o Synchrotron.o PP.o PhotoDisintegration.o NeutronDecay.o Jacobian.o ICS.o Concentrations.o Coupling.o TableBackground.o Kneiske1001IROSpectrum.o Log.o ScanInfoWritter.o Resource.o base64.o VersionInfo.o Dpp.o ClusterIROSpectrum.o Stecker2005IROSpectrum.o Stecker98IROSpectrum.o Nucleus.o PowerLowInjectionSpectra.o ParticleList.o FragmentationBasedInjSpectra.o Function.o PropagEngine.o Addfunc.o Background.o const.o EMCrosssec.o DataReader.o main.o FilePreprocessor.o FilePtr.o Fragmentation.o InjectionSpectra.o LEPData.o TableFunc.o MassiveNeutrino.o MuPP.o ParticleData.o Ppp.o DecaySpectrum.o Medium.o Ranges.o SecondaryDifSigma.o Sigma.o TableReader.o TimeZ.o UserInjSpectra.o Vector.o Units.o Init.o KneiskeIROSpectrum.o PrimackIROSpectrum.o XMLUtil.o XMLSwitchFileReader.o MPP.o

Xmax_OBJECTS = Xmax.o Log.o Addfunc.o FilePreprocessor.o FilePtr.o TableFunc.o TableReader.o Vector.o base64.o Resource.o VersionInfo.o

ResourceCompile_OBJECTS = base64.o ResourceCompile.o
 
all: propagation.ja DeleteVersionInfo
VersionInfo: ResourceCompile
	./PrintInfo.sh

DeleteVersionInfo:
	rm -f _autogeneratedVersionInfo.h _autogeneratedDif.c _autogeneratedGitInfo.c

ResourceCompile: $(ResourceCompile_OBJECTS)
	g++ -o ResourceCompile $(LINKER_ENTRY) $(LINKER_FLAGS) $(ResourceCompile_OBJECTS) -lc

Xmax: VersionInfo $(Xmax_OBJECTS) DeleteVersionInfo
	$(LINKER) -o Xmax $(LINKER_ENTRY) $(LINKER_FLAGS) $(Xmax_OBJECTS) $(Xmax_LIBS)

propagation.ja: VersionInfo $(propagation.sp_OBJECTS)
	$(LINKER) -o propagation.ja.new $(LINKER_ENTRY) $(LINKER_FLAGS) $(propagation.sp_OBJECTS) $(propagation.sp_LIBS)

.y.c:
	$(YACC) $< $(YACC_FLAGS) $(YACC_DEFINES) $(YACC_INCLUDES)


.l.c:
	$(LEX) $< $(LEX_FLAGS) $(LEX_DEFINES) $(LEX_INCLUDES)


.java.o:
	$(JAVA) -c $< $(JAVA_FLAGS) $(JAVA_DEFINES) $(JAVA_INCLUDES)
.class:
	$(JAVA) -c $< $(JAVA_FLAGS) $(JAVA_DEFINES) $(JAVA_INCLUDES)


.c.o:
	$(CC) -c $< $(CC_FLAGS) $(CC_DEFINES) $(CC_INCLUDES)


.cpp.o:
	$(CPP) -c $< $(CPP_FLAGS) $(CPP_DEFINES) $(CPP_INCLUDES)
.C.o:
	$(CPP) -c $< $(CPP_FLAGS) $(CPP_DEFINES) $(CPP_INCLUDES)
.cc.o:
	$(CPP) -c $< $(CPP_FLAGS) $(CPP_DEFINES) $(CPP_INCLUDES)
.cxx.o:
	$(CPP) -c $< $(CPP_FLAGS) $(CPP_DEFINES) $(CPP_INCLUDES)

.f.o:
	gfortran -ffixed-line-length-200 -std=legacy -ggdb -c $< -o $@
	
.f95.o:
	gfortran -ffixed-line-length-200 -std=legacy -ggdb -c $< -o $@

clean: DeleteVersionInfo
	rm -f *.o pp/*.o
